<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üî• FLAMES Test</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  transition:background .5s;
}

/* Floating emoji */
.float{
  position:absolute;
  bottom:-20px;
  font-size:20px;
  opacity:.85;
  animation:floatUp linear infinite;
}
@keyframes floatUp{
  to{transform:translateY(-120vh);opacity:0}
}

.card{
  background:#fff;
  padding:30px;
  border-radius:22px;
  width:92%;
  max-width:480px;
  text-align:center;
  box-shadow:0 25px 45px rgba(0,0,0,.25);
  z-index:2;
}

h1{margin-bottom:10px}

input{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid #ddd;
}

button{
  padding:14px 28px;
  border-radius:999px;
  border:none;
  font-weight:600;
  background:#ff4d6d;
  color:#fff;
  cursor:pointer;
  margin-top:10px;
}

button.secondary{
  background:#111827;
  margin:6px;
}

.row{margin-top:10px}

.letter{
  display:inline-block;
  padding:6px 10px;
  margin:4px;
  border-radius:8px;
  background:#f3f4f6;
  font-weight:600;
}

.strike{
  background:#fecaca;
  text-decoration:line-through;
}

.flames span{
  display:inline-block;
  padding:10px 14px;
  margin:6px;
  border-radius:10px;
  background:#e5e7eb;
  font-weight:700;
}

.flames .out{
  opacity:.35;
  text-decoration:line-through;
}

.flames .final{
  border:3px solid #ff4d6d;
  background:#ffe4e6;
}

#status,#count{margin-top:12px;font-weight:600}
#result{margin-top:16px;font-size:20px;font-weight:700}
#history{margin-top:10px;font-size:14px;color:#374151}

</style>
</head>

<body>

<div class="card">
  <h1>üî• FLAMES Test</h1>

  <div id="form">
    <input id="name1" placeholder="Your Name">
    <input id="name2" placeholder="Partner Name">
    <button onclick="start()">Check Relationship üíñ</button>
  </div>

  <div id="status"></div>

  <div class="row" id="row1"></div>
  <div class="row" id="row2"></div>

  <div id="count"></div>
  <div id="flames" class="flames"></div>

  <div id="result"></div>
  <div id="history"></div>

  <div id="actions">
    <button class="secondary" onclick="share()">üì§ Share</button>
    <button class="secondary" onclick="restart()">üîÑ Restart</button>
  </div>
</div>

<script>
/* ---------- FLOATING EMOJI ---------- */
let floatingEmoji = "‚ù§Ô∏è";

setInterval(()=>{
  const e=document.createElement("div");
  e.className="float";
  e.innerText=floatingEmoji;
  e.style.left=Math.random()*100+"vw";
  e.style.animationDuration=(4+Math.random()*3)+"s";
  document.body.appendChild(e);
  setTimeout(()=>e.remove(),7000);
},600);

/* ---------- DATA ---------- */
const flamesMap={
  F:{text:"ü§ù Friends",bg:"#a1c4fd",emoji:"ü§ù"},
  L:{text:"‚ù§Ô∏è Love",bg:"#ff9a9e",emoji:"‚ù§Ô∏è"},
  A:{text:"ü•∞ Affection",bg:"#fad0c4",emoji:"ü•∞"},
  M:{text:"üíç Marriage",bg:"#fbc2eb",emoji:"üíç"},
  E:{text:"üòÖ Enemies",bg:"#cfd9df",emoji:"üòÖ"},
  S:{text:"üíû Soulmates",bg:"#fddb92",emoji:"üíû"}
};

let remaining=0,step=0;
let flamesState=[];
let lastName1="",lastName2="";

/* ---------- START ---------- */
function start(){
  const n1=name1.value.trim();
  const n2=name2.value.trim();
  if(!n1||!n2) return alert("Enter both names");

  lastName1=n1;
  lastName2=n2;

  const a=n1.toLowerCase().replace(/\s/g,"").split("");
  const b=n2.toLowerCase().replace(/\s/g,"").split("");

  form.style.display="none";
  status.innerText="Comparing names‚Ä¶";

  row1.innerHTML=a.map(l=>`<span class="letter">${l}</span>`).join("");
  row2.innerHTML=b.map(l=>`<span class="letter">${l}</span>`).join("");

  setTimeout(()=>strikeCommon(a,b),800);
}

/* ---------- STRIKE ---------- */
function strikeCommon(a,b){
  const r1=row1.children,r2=row2.children;
  a.forEach((l,i)=>{
    const j=b.indexOf(l);
    if(j>-1){
      r1[i].classList.add("strike");
      r2[j].classList.add("strike");
      a[i]=""; b[j]="";
    }
  });

  remaining=a.join("").length+b.join("").length;
  count.innerText="Remaining letters count: "+remaining;

  initFlames();
  setTimeout(runFlames,600);
}

/* ---------- FLAMES ---------- */
function initFlames(){
  flamesState=["F","L","A","M","E","S"].map(l=>({l,out:false,final:false}));
  renderFlames();
}

function renderFlames(){
  flames.innerHTML=flamesState.map(f=>
    `<span class="${f.final?'final':f.out?'out':''}">${f.l}</span>`
  ).join("");
}

function runFlames(){
  const active=flamesState.filter(f=>!f.out&&!f.final);

  if(active.length===1){
    active[0].final=true;
    renderFlames();
    setTimeout(()=>showResult(active[0].l),900);
    return;
  }

  step=(step+remaining-1)%active.length;
  active[step].out=true;
  renderFlames();

  setTimeout(runFlames,650);
}

/* ---------- RESULT ---------- */
function showResult(letter){
  const r=flamesMap[letter];

  document.body.style.background=`linear-gradient(135deg,${r.bg},#fff)`;
  floatingEmoji=r.emoji;

  result.innerText=r.text;

  const save={
    name1:lastName1,
    name2:lastName2,
    result:r.text
  };
  localStorage.setItem("flamesLast",JSON.stringify(save));

  history.innerHTML=
    `Last result:<br>
     <strong>${save.name1}</strong> ${r.emoji} <strong>${save.name2}</strong><br>
     ${save.result}`;
}

/* ---------- ACTIONS ---------- */
function restart(){ location.reload(); }

function share(){
  navigator.clipboard.writeText(
    `FLAMES Result:\n${lastName1} ${floatingEmoji} ${lastName2}\n${result.innerText}`
  );
  alert("Result copied üíñ");
}

/* ---------- LOAD HISTORY ---------- */
window.onload=()=>{
  const data=localStorage.getItem("flamesLast");
  if(data){
    const last=JSON.parse(data);
    history.innerHTML=
      `Last result:<br>
       <strong>${last.name1}</strong> ‚ù§Ô∏è <strong>${last.name2}</strong><br>
       ${last.result}`;
  }
};
</script>

</body>
</html>
