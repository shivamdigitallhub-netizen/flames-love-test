<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>üî• FLAMES Test</title>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  font-family:system-ui,-apple-system,sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  transition:background .6s;
}

/* Floating hearts */
.heart{
  position:absolute;
  bottom:-20px;
  font-size:18px;
  opacity:.8;
  animation:floatUp linear infinite;
}
@keyframes floatUp{
  to{transform:translateY(-120vh);opacity:0}
}

.card{
  background:#fff;
  padding:32px;
  border-radius:22px;
  width:92%;
  max-width:480px;
  text-align:center;
  box-shadow:0 25px 50px rgba(0,0,0,.25);
  z-index:2;
}

h1{margin-bottom:12px}

input{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:15px;
}

button{
  padding:14px 28px;
  border-radius:999px;
  border:none;
  font-size:15px;
  font-weight:600;
  background:#ff4d6d;
  color:#fff;
  cursor:pointer;
  margin-top:10px;
}

button.secondary{
  background:#111827;
  margin:8px;
}

.row{margin-top:12px}

.letter{
  display:inline-block;
  padding:6px 10px;
  margin:4px;
  border-radius:8px;
  background:#f3f4f6;
  font-weight:600;
}

.strike{
  background:#fecaca;
  text-decoration:line-through;
}

.flames span{
  display:inline-block;
  padding:10px 14px;
  margin:6px;
  border-radius:10px;
  background:#e5e7eb;
  font-weight:700;
  transition:.35s;
}

.flames .out{
  opacity:.35;
  text-decoration:line-through;
}

.flames .final{
  border:3px solid #ff4d6d;
  background:#ffe4e6;
}

#status,#count{margin-top:12px;font-weight:600}
#result{
  margin-top:18px;
  font-size:20px;
  font-weight:700;
  display:none;
}
#history{
  margin-top:10px;
  font-size:14px;
  color:#374151;
}
#history strong{color:#ff4d6d}

#actions{display:none;margin-top:12px}
</style>
</head>

<body>

<div class="card">
  <h1>üî• FLAMES Test</h1>

  <div id="form">
    <input id="n1" placeholder="Your Name">
    <input id="n2" placeholder="Partner Name">
    <button onclick="start()">Check Relationship üíñ</button>
  </div>

  <div id="status"></div>
  <div class="row" id="row1"></div>
  <div class="row" id="row2"></div>
  <div id="count"></div>

  <div id="flames" class="flames"></div>

  <div id="result"></div>
  <div id="history"></div>

  <div id="actions">
    <button class="secondary" onclick="share()">üì§ Share</button>
    <button class="secondary" onclick="restart()">üîÑ Restart</button>
  </div>
</div>

<script>
/* Floating hearts */
setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart";
  h.innerText="‚ù§Ô∏è";
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(4+Math.random()*3)+"s";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),7000);
},600);

/* Globals */
const flamesLetters=["F","L","A","M","E","S"];
let flamesState=[],stepIndex=0,remaining=0;
let lastName1="",lastName2="";

/* Start */
function start(){
  const name1=n1.value.trim();
  const name2=n2.value.trim();
  if(!name1||!name2) return alert("Enter both names");

  lastName1=name1;
  lastName2=name2;

  const a=name1.toLowerCase().replace(/\s/g,"").split("");
  const b=name2.toLowerCase().replace(/\s/g,"").split("");

  form.style.display="none";
  status.innerText="Comparing names‚Ä¶";

  row1.innerHTML=a.map(l=>`<span class="letter">${l}</span>`).join("");
  row2.innerHTML=b.map(l=>`<span class="letter">${l}</span>`).join("");

  setTimeout(()=>strikeCommon(a,b),800);
}

/* Strike common letters */
function strikeCommon(a,b){
  const r1=row1.children,r2=row2.children;
  a.forEach((l,i)=>{
    const j=b.indexOf(l);
    if(j>-1){
      r1[i].classList.add("strike");
      r2[j].classList.add("strike");
      a[i]="";b[j]="";
    }
  });

  remaining=a.join("").length+b.join("").length;
  count.innerText="Remaining letters count: "+remaining;

  initFlames();
  setTimeout(runFlames,700);
}

/* FLAMES init */
function initFlames(){
  flamesState=flamesLetters.map(l=>({l,out:false,final:false}));
  renderFlames();
}

/* Render */
function renderFlames(){
  flames.innerHTML=flamesState.map(f=>
    `<span class="${f.final?'final':f.out?'out':''}">${f.l}</span>`
  ).join("");
}

/* Run elimination */
function runFlames(){
  const active=flamesState.filter(f=>!f.out&&!f.final);

  if(active.length===1){
    active[0].final=true;
    renderFlames();
    setTimeout(()=>showResult(active[0].l),1000);
    return;
  }

  stepIndex=(stepIndex+remaining-1)%active.length;
  active[stepIndex].out=true;

  renderFlames();
  setTimeout(runFlames,700);
}

/* Result */
function showResult(l){
  const map={
    F:["ü§ù Friends","#a1c4fd"],
    L:["‚ù§Ô∏è Love","#ff9a9e"],
    A:["ü•∞ Affection","#fad0c4"],
    M:["üíç Marriage","#fbc2eb"],
    E:["üòÖ Enemies","#cfd9df"],
    S:["üíû Soulmates","#fddb92"]
  };

  document.body.style.background=`linear-gradient(135deg,${map[l][1]},#fff)`;
  result.innerText=map[l][0];
  result.style.display="block";

  const save={
    name1:lastName1,
    name2:lastName2,
    result:map[l][0]
  };
  localStorage.setItem("flamesLast",JSON.stringify(save));

  history.innerHTML=
    `Last result:<br>
     <strong>${save.name1}</strong> ‚ù§Ô∏è <strong>${save.name2}</strong><br>
     ${save.result}`;

  actions.style.display="block";
}

/* Share */
function share(){
  navigator.clipboard.writeText(
    `FLAMES Result:\n${lastName1} ‚ù§Ô∏è ${lastName2}\n${result.innerText}`
  );
  alert("Result copied üíñ");
}

/* Restart */
function restart(){
  location.reload();
}

/* Load last history */
window.onload=()=>{
  const data=localStorage.getItem("flamesLast");
  if(data){
    const last=JSON.parse(data);
    history.innerHTML=
      `Last result:<br>
       <strong>${last.name1}</strong> ‚ù§Ô∏è <strong>${last.name2}</strong><br>
       ${last.result}`;
  }
};
</script>

</body>
</html>
