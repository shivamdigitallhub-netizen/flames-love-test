<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ”¥ FLAMES Test</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  font-family: system-ui, -apple-system, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  transition: background .5s;
}

/* Floating hearts */
.heart {
  position: absolute;
  bottom: -30px;
  font-size: 20px;
  animation: floatUp linear infinite;
  opacity: .8;
  pointer-events: none;
}
@keyframes floatUp {
  to { transform: translateY(-120vh); opacity: 0; }
}

.card {
  background: #fff;
  padding: 32px;
  border-radius: 24px;
  width: 90%;
  max-width: 480px;
  text-align: center;
  box-shadow: 0 20px 45px rgba(0,0,0,.25);
  z-index: 2;
}

h1 { margin-bottom: 14px; }

input {
  width: 100%;
  padding: 14px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #ddd;
  font-size: 15px;
}

button {
  padding: 14px 28px;
  border-radius: 999px;
  border: none;
  font-weight: 600;
  font-size: 15px;
  background: #ff4d6d;
  color: #fff;
  cursor: pointer;
  margin-top: 10px;
}

button.secondary {
  background: #111827;
  margin: 8px;
}

.row { margin-top: 10px; }

.letter {
  display: inline-block;
  padding: 6px 10px;
  margin: 4px;
  border-radius: 8px;
  background: #f3f4f6;
  font-weight: 600;
}

.strike {
  background: #fecaca;
  text-decoration: line-through;
}

.flames span {
  display: inline-block;
  padding: 10px 14px;
  margin: 6px;
  border-radius: 10px;
  background: #e5e7eb;
  font-weight: 700;
  transition: .3s;
}

.flames .out {
  opacity: .35;
  text-decoration: line-through;
}

.flames .final {
  border: 3px solid #ff4d6d;
  background: #ffe4e6;
}

#status, #count { margin-top: 12px; font-weight: 600; }
#result { margin-top: 16px; font-size: 18px; font-weight: 700; display:none; }
#history { margin-top: 8px; font-size: 14px; color:#374151; }
</style>
</head>

<body>

<div class="card">
  <h1>ðŸ”¥ FLAMES Test</h1>

  <div id="form">
    <input id="n1" placeholder="Your Name">
    <input id="n2" placeholder="Partner Name">
    <button onclick="start()">Check Relationship ðŸ’–</button>
  </div>

  <div id="status"></div>
  <div class="row" id="row1"></div>
  <div class="row" id="row2"></div>
  <div id="count"></div>

  <div id="flames" class="flames"></div>

  <div id="result"></div>
  <div id="history"></div>

  <div id="actions" style="display:none;">
    <button class="secondary" onclick="share()">ðŸ“¤ Share</button>
    <button class="secondary" onclick="location.reload()">ðŸ”„ Restart</button>
  </div>
</div>

<script>
/* Floating hearts */
setInterval(() => {
  const h = document.createElement("div");
  h.className = "heart";
  h.innerText = "â¤ï¸";
  h.style.left = Math.random()*100+"vw";
  h.style.animationDuration = (6+Math.random()*4)+"s";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),10000);
}, 700);

/* Logic */
let a=[], b=[], remaining=0;
const flamesOrder = ["F","L","A","M","E","S"];
let flamesState = [];
let stepIndex = 0;

function start(){
  const name1=n1.value.trim();
  const name2=n2.value.trim();
  if(!name1 || !name2) return alert("Enter both names");

  a=name1.toLowerCase().replace(/\s/g,"").split("");
  b=name2.toLowerCase().replace(/\s/g,"").split("");

  form.style.display="none";
  status.innerText="Showing lettersâ€¦";

  row1.innerHTML = a.map(l=>`<span class="letter">${l}</span>`).join("");
  row2.innerHTML = b.map(l=>`<span class="letter">${l}</span>`).join("");

  setTimeout(strikeCommon,3000);
}

function strikeCommon(){
  status.innerText="Striking common lettersâ€¦";
  const r1=row1.children, r2=row2.children;

  a.forEach((l,i)=>{
    const j=b.indexOf(l);
    if(j>-1){
      r1[i].classList.add("strike");
      r2[j].classList.add("strike");
      a[i]=""; b[j]="";
    }
  });

  setTimeout(countRemaining,3000);
}

function countRemaining(){
  remaining = a.join("").length + b.join("").length;
  count.innerText = "Remaining letters count: "+remaining;
  status.innerText="Running FLAMESâ€¦";

  initFlames();
  setTimeout(runFlames,3000);
}

function initFlames(){
  flamesState = flamesOrder.map(l=>({letter:l, out:false}));
  renderFlames();
}

function renderFlames(){
  flames.innerHTML = flamesState.map(f =>
    `<span class="${f.out ? 'out':''}">${f.letter}</span>`
  ).join("");
}

function runFlames(){
  const active = flamesState.filter(f=>!f.out);
  if(active.length === 1){
    active[0].final = true;
    flames.innerHTML = flamesState.map(f =>
      `<span class="${f.final?'final':f.out?'out':''}">${f.letter}</span>`
    ).join("");
    showResult(active[0].letter);
    return;
  }

  stepIndex = (stepIndex + remaining - 1) % active.length;
  const target = active[stepIndex];
  target.out = true;

  renderFlames();
  setTimeout(runFlames,3000);
}

function showResult(letter){
  const map={
    F:["ðŸ¤ Friends","#a1c4fd"],
    L:["â¤ï¸ Love","#ff9a9e"],
    A:["ðŸ¥° Affection","#fad0c4"],
    M:["ðŸ’ Marriage","#fbc2eb"],
    E:["ðŸ˜… Enemies","#cfd9df"],
    S:["ðŸ’ž Soulmates","#fddb92"]
  };

  document.body.style.background =
    `linear-gradient(135deg,${map[letter][1]},#fff)`;

  result.innerText = map[letter][0];
  result.style.display="block";

  localStorage.setItem("lastResult",map[letter][0]);
  history.innerText = "Last result: "+map[letter][0];
  actions.style.display="block";
}

function share(){
  navigator.clipboard.writeText("FLAMES Result: "+result.innerText);
  alert("Copied to clipboard ðŸ’–");
}

window.onload=()=>{
  const last=localStorage.getItem("lastResult");
  if(last) history.innerText="Last result: "+last;
};
</script>

</body>
</html>
